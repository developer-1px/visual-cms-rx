# StoreSchema 통합 및 storePath 정리 완료

> StoreSchema가 중복이야. 다 찾아서 하나로 통합 정리해줘 그리고 storePath를 만드는 건 api이지만 storePath 생성은 @src/lib/entities/ 에 있어야 해

## 완료된 작업

### 1. createPathProxy API 분리
- ✅ `/lib/base/svelte-rx/createPathProxy.ts` 생성
- 순수한 프록시 생성 유틸리티만 포함
- 재사용 가능한 API로 분리

### 2. StoreSchema 통합
- ✅ `/lib/entities/storePath.ts` 생성
- StoreSchema를 entities로 이동 (single source of truth)
- 중복 제거: base/svelte-rx/store-path.ts의 StoreSchema 제거

### 3. storePath 인스턴스 이동
- ✅ storePath 생성을 entities/storePath.ts로 이동
- entities가 애플리케이션 상태 구조의 주인이 됨
- `export const storePath = createPathProxy<StoreSchema>();`

### 4. Import 경로 업데이트
- ✅ `entities/editor/modeStore.ts`: `../storePath` 사용
- ✅ `entities/selection/store.ts`: `../storePath` 사용
- ✅ `entities/index.ts`: StoreSchema와 storePath 재내보내기

### 5. 호환성 유지
- ✅ `base/svelte-rx/store-path.ts`를 deprecated로 표시
- 기존 코드 호환성을 위한 재내보내기 제공
- 마이그레이션 경고 메시지 추가

## 현재 구조

```
src/lib/
├── base/svelte-rx/
│   ├── createPathProxy.ts    # 순수 API (프록시 생성 함수)
│   └── store-path.ts         # deprecated (호환성 유지)
│
└── entities/
    ├── storePath.ts          # StoreSchema 정의 + storePath 인스턴스
    └── index.ts              # 재내보내기
```

## 아키텍처 개선점

1. **명확한 책임 분리**
   - base: 도구와 유틸리티 제공
   - entities: 애플리케이션 상태 구조 정의

2. **Single Source of Truth**
   - StoreSchema가 entities/storePath.ts에만 존재
   - 모든 상태 관련 코드가 하나의 스키마 참조

3. **타입 안전성 유지**
   - storePath 프록시를 통한 타입 안전한 경로 접근
   - 컴파일 타임에 경로 오류 검출

## 사용 예시

```typescript
// 새로운 방식
import { storePath } from '@/lib/entities/storePath';
import { reducer } from '@/lib/base/svelte-rx/svelte-rx.svelte';

export const useEditorMode = reducer(
  storePath.editor.mode,  // "editor.mode"
  'select' as EditorMode,
  on => { /* ... */ }
);
```

## 빌드 결과

✅ `pnpm build` 성공 (a11y 경고만 있음)