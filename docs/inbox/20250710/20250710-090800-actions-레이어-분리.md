# Actions 레이어 분리

> actions는 모두가 공유하는거라서 features에 두면 entities와 의존관계가 깨지니까 actions는 완전 별도 레이어로 분리해야 된다 생각해

## 문제 인식

### 현재 상황
- actions가 entities/selection/actions.ts에 있음
- entities는 순수 데이터여야 하는데 액션(이벤트)이 섞여있음
- features에 옮기면 entities → features 의존성이 생김 (역전!)

### 의존성 분석
```
올바른 의존성:
features → entities (기능이 데이터를 사용)
features → actions (기능이 액션을 발생)
entities → actions (데이터가 액션을 구독)

잘못된 의존성:
entities → features (데이터가 기능에 의존)
```

## 해결 방안: Actions를 별도 레이어로

### 제안하는 구조
```
src/lib/
├── actions/              # 공유 이벤트 레이어 (NEW!)
│   ├── editor/          # 에디터 관련 액션
│   │   └── mode.ts      # 모드 변경 액션
│   ├── selection/       # 선택 관련 액션
│   │   └── index.ts     # 선택, 해제, 크기변경 등
│   └── index.ts         # 전체 액션 재내보내기
├── entities/            # 순수 데이터
│   ├── editor/
│   └── selection/
├── features/            # 비즈니스 로직
└── modules/             # UI 컴포넌트
```

### 장점
1. **명확한 의존성**: 모든 레이어가 actions를 참조 가능
2. **순수성 유지**: entities는 순수 데이터만 포함
3. **재사용성**: 액션은 어디서든 import 가능
4. **관심사 분리**: 이벤트 정의가 별도로 관리됨

## 구현 계획

1. `/lib/actions/` 폴더 생성
2. 각 도메인별 하위 폴더 생성 (editor/, selection/ 등)
3. 기존 액션들 이동
   - entities/selection/actions.ts → actions/selection/index.ts
   - entities/editor/modeStore.ts의 액션들 → actions/editor/mode.ts
4. import 경로 업데이트
5. entities는 types와 store만 남김