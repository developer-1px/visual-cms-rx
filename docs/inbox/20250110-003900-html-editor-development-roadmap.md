# HTML 에디터 개발 로드맵

> 이제 앞으로 어떻게 만들지 보고서를 써봐

## 현재 상태 분석

### 완료된 기능
1. **기본 선택 시스템**
   - Selectable 컴포넌트로 요소 선택 가능
   - SelectionOverlay로 선택된 요소 시각화
   - RxJS 기반 상태 변화 추적 (createBoundingRectObservable)

2. **편집 모드 오버레이**
   - EditOverlay로 hover/클릭 이벤트 차단
   - elementsFromPoint로 요소 탐색
   - 편집 모드 on/off 전환 가능

3. **HTML 파싱 및 렌더링**
   - HtmlRenderer로 HTML 구조 표시
   - 텍스트 선택 기능 (word 단위)
   - 기본적인 DOM 구조 유지

## 향후 개발 계획

### 1단계: 편집 인터페이스 강화 (1주차)
- **선택 모드 다양화**
  - 텍스트 선택 (문자, 단어, 문장 단위)
  - 요소 선택 (블록 요소, 인라인 요소)
  - 다중 선택 (Ctrl/Cmd + 클릭)
  
- **시각적 피드백 개선**
  - 마우스 hover 시 선택 가능 영역 표시
  - 선택 타입별 다른 색상/스타일
  - 편집 가능 영역 구분 표시

### 2단계: 편집 기능 구현 (2주차)
- **텍스트 편집**
  - ContentEditable 대신 커스텀 입력 처리
  - 인라인 텍스트 수정
  - 텍스트 스타일 변경 (bold, italic, 색상)
  
- **구조 편집**
  - 요소 추가/삭제
  - 드래그 앤 드롭으로 재배치
  - 중첩 구조 편집

### 3단계: 데이터 모델 완성 (3주차)
- **CRDT 구현**
  - 동시 편집 충돌 해결
  - 변경 이력 추적
  - 효율적인 diff 알고리즘
  
- **Undo/Redo 시스템**
  - Command 패턴 구현
  - 상태 스냅샷 관리
  - 선택적 되돌리기

### 4단계: 고급 기능 (4주차)
- **협업 기능**
  - 실시간 동기화
  - 사용자별 커서 표시
  - 변경 사항 하이라이트
  
- **템플릿 시스템**
  - 컴포넌트 라이브러리
  - 커스텀 위젯 지원
  - 반응형 레이아웃

## 기술적 과제

### 1. 성능 최적화
- Virtual DOM 최적화
- 대용량 문서 처리
- 부드러운 스크롤/줌

### 2. 브라우저 호환성
- Selection API 차이 처리
- 입력 메서드 편집기(IME) 지원
- 모바일 터치 인터페이스

### 3. 확장성
- 플러그인 아키텍처
- 커스텀 렌더러 지원
- 다양한 파일 포맷 import/export

## 우선순위 제안

1. **즉시 구현 (이번 주)**
   - 마우스 hover 프리뷰
   - 다중 선택 기능
   - 기본 텍스트 편집

2. **단기 목표 (2주 내)**
   - CRDT 기본 구조
   - Undo/Redo 구현
   - 드래그 앤 드롭

3. **장기 목표 (1개월 내)**
   - 실시간 협업
   - 플러그인 시스템
   - 고급 편집 도구

## 핵심 설계 원칙

1. **데이터 중심**: DOM 조작 최소화, 모델 기반 렌더링
2. **직렬화 가능**: 모든 상태를 JSON으로 저장/복원
3. **확장 가능**: 새로운 요소 타입 쉽게 추가
4. **성능 우선**: 대용량 문서도 부드럽게 처리

## 다음 단계 액션 아이템

1. 마우스 hover 시 선택 가능 영역 미리보기 구현
2. 텍스트 편집을 위한 커스텀 입력 핸들러 개발
3. CRDT 데이터 구조 설계 및 프로토타입
4. Undo/Redo를 위한 Command 패턴 구현

이 로드맵을 따라 단계적으로 구현하면, 완전한 기능을 갖춘 HTML 에디터를 만들 수 있을 것입니다.